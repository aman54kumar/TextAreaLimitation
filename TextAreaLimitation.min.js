var TextAreaLimitation=function(){function n(t,i){var r=this,u;i===void 0&&(i="en");this.Element=t;this.lang=i;t.length>1?t.each(function(t,i){var r=new n($(i))}):(this.textArea=this.Element[0],this.hasData("maxlines")&&(this.maxLines=parseInt(t.data("maxlines"))),this.hasData("charperline")&&(this.maxCharPerLines=parseInt(t.data("charperline"))),u=t.parent(),u.hasClass("form-group")==!1&&t.wrap("<div class='form-group'><\/div>"),t.hasClass("form-control")==!1&&t.addClass("form-control"),this.formGroup=t.closest(".form-group"),t.keydown(function(n){if(!n.ctrlKey&&n.keyCode!==46&&n.keyCode!==37&&n.keyCode!==38&&n.keyCode!==39&&n.keyCode!==40&&n.keyCode!==16&&n.keyCode!==17&&n.keyCode!==18&&n.keyCode!==8){var t=r.getInfo(),i=r.validateLinesLenght(t,!1,n.keyCode);return i?n.keyCode!==13?r.validateText(!1,t):void 0:!1}}),t.change(function(){var n=r.getInfo(),t=r.validateLinesLenght(n,!0),i;if(!t){r.displayLinexExceedError(n.length);return}i=r.validateText(!0,n);i&&t&&r.isInError&&(r.Element.trigger("cs.TextAreaLimitation","valid"),r.isInError=!1,r.formGroup.removeClass("has-error"),r.Element.popover("hide"))}))}return n.prototype.hasData=function(n){return typeof this.Element.data(n)!="undefined"?!0:!1},n.prototype.getLineNumber=function(){return this.textArea.value.substr(0,this.textArea.selectionStart).split("\n").length},n.prototype.validateText=function(n,t){var r,u,i;if(this.maxCharPerLines==null)return!0;for(r=0,u=this.getLineNumber()-1,i=0;i<t.length;i++){if(r=t[i].length,!n&&r+1>this.maxCharPerLines&&u==i)return!1;if(n&&r>this.maxCharPerLines)return this.isInError=!0,this.formGroup.addClass("has-error"),this.displayErrorLenghtMessage(i,t[i]),!1}return!0},n.prototype.validateLinesLenght=function(n,t,i){return this.maxLines==null?!0:n.length>this.maxLines?!1:i!=null&&i===13&&n.length+1>this.maxLines?!1:!0},n.prototype.getInfo=function(){var n=this.Element.val();return n.split("\n")},n.prototype.displayErrorLenghtMessage=function(n,t){var i=this,r="";r=this.lang=="fr"?"Chaque ligne ne doit pas dépasser "+this.maxCharPerLines+" caractères par ligne.<br />La ligne "+(n+1)+" dépasse ce maximum. Elle a "+t.length+" caractères.<br / ><blockquote><p>"+t+"<\/p><footer>"+(this.maxCharPerLines-t.length)+" caractères de trop.<\/foorter><\/blockquote>":"Each line must not exceed "+this.maxCharPerLines+" characters per line.<br /> Line "+(n+1)+" exceeds this maximum.It has "+t.length+" characters.<br / ><blockquote><p>"+t+"<\/p><footer>It exceed this limit by "+(this.maxCharPerLines-t.length)+".<\/foorter><\/blockquote>";this.Element.popover("destroy");setTimeout(function(){i.Element.popover({html:!0,content:r,placement:"top",trigger:"manual"});i.Element.popover("show")},300);this.Element.trigger("cs.TextAreaLimitation","invalid")},n.prototype.displayLinexExceedError=function(n){var t=this,i="";i=this.lang=="fr"?"Vous devez entrer un maximum de "+this.maxLines+" lignes.<br />Votre texte  contient "+n.toString()+" lignes.":"You must enter a maximum of "+this.maxLines+" lines. Your text contains "+n.toString()+" lines.";this.Element.popover("destroy");setTimeout(function(){t.Element.popover({html:!0,content:i,placement:"top",trigger:"manual"});t.Element.popover("show")},300);this.Element.trigger("cs.TextAreaLimitation","invalid")},n}();
//# sourceMappingURL=TextAreaLimitation.min.js.map
